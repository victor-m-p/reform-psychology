---
title: "Quick EDA"
author: "Victor MÃ¸ller Poulsen"
output:
  pdf_document: default
  html_document: default
---

# Load packages

```{r setup, include = FALSE}

# consider pacman
install.packages("pacman") 
library(pacman)

p_load(tidyverse, cowplot)

```

# load data & mutate new columns

```{r}

# mutate new columns
d <- read_csv("/work/50114/MAG/data/modeling/psych_replication_matched.csv") %>%
  mutate(log_teamsize = log(n_authors), 
         condition_fct = as_factor(condition), 
         id_match = as_factor(match_group),
         year_after_2010 = Year - 2010) %>% 
  glimpse()

```

# Check distributions 

```{r}

d %>% ggplot(aes(x = c_5)) +
  geom_histogram() + 
  facet_wrap(vars(condition_fct))

```

```{r}
d %>% filter(c_5 <= 100) %>%
  ggplot(aes(x = c_5)) + 
  geom_histogram() + 
  facet_wrap(vars(condition_fct))
```


# Check teamsize interaction with condition

## raw 

strong effect of teamsize,
interaction probably driven by few data-points

```{r}
d %>% ggplot(aes(x = log_teamsize, y = c_5, color = condition_fct)) +
  geom_point() + 
  geom_smooth(method="lm")

```


## log 
not sure whether this is more appropriate

```{r}

d %>% ggplot(aes(x = log_teamsize, y = c_5, color = condition_fct)) +
  geom_point() + 
  geom_smooth(method="lm") + 
  ylim(0, 100)

```


# check days interaction
Also clealy no interaction effect. 
Slightly decreasing trend, not interesting. 
Probably just want to control for this. 

```{r}

d %>% 
  ggplot(aes(x = Year, y = c_5, color = condition_fct)) + 
  geom_point() + 
  geom_smooth(method="lm") +
  ylim(0, 100)

```

